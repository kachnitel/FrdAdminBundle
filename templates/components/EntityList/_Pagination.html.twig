{#
 # Partial template for pagination controls.
 #
 # Variables:
 # @var PaginationInfo paginationInfo - Pagination information object
 # @var int page - Current page number
 # @var array allowedItemsPerPage - Available items per page options
 # @var int itemsPerPage - Current items per page
 #}

{% import kachnitel_admin_theme as css %}

{% if paginationInfo.totalPages > 0 %}
    <div class="pagination-wrapper {{ css.flex_between() }} {{ css.mt_3() }}">
        {# Items per page selector #}
        <div class="items-per-page">
            <label for="items-per-page" class="{{ css.form_label() }} {{ css.me_2() }}">Items per page:</label>
            <select
                id="items-per-page"
                class="{{ css.form_select_sm() }} {{ css.inline_block() }}"
                data-model="itemsPerPage"
            >
                {% for option in allowedItemsPerPage %}
                    <option value="{{ option }}" {% if option == itemsPerPage %}selected{% endif %}>
                        {{ option }}
                    </option>
                {% endfor %}
            </select>
        </div>

        {# Pagination info and controls #}
        <div class="pagination-info-controls {{ css.flex_center() }} {{ css.gap_lg() }}">
            {# Showing X-Y of Z #}
            <span class="{{ css.text_muted() }}">
                {% if paginationInfo.totalItems > 0 %}
                    Showing {{ paginationInfo.startItem }}-{{ paginationInfo.endItem }} of {{ paginationInfo.totalItems }}
                {% else %}
                    No items
                {% endif %}
            </span>

            {# Page navigation #}
            <nav aria-label="Page navigation">
                <ul class="{{ css.pagination() }}">
                    {# Previous button #}
                    <li class="{{ page <= 1 ? css.page_item_disabled() : css.page_item() }}">
                        <button
                            class="{{ css.page_link() }}"
                            data-action="live#action"
                            data-live-action-param="previousPage"
                            {% if page <= 1 %}disabled{% endif %}
                        >
                            Previous
                        </button>
                    </li>

                    {# Page number display #}
                    <li class="{{ css.page_item_disabled() }}">
                        <span class="{{ css.page_link() }}">
                            Page {{ page }} of {{ paginationInfo.totalPages }}
                        </span>
                    </li>

                    {# Next button #}
                    <li class="{{ page >= paginationInfo.totalPages ? css.page_item_disabled() : css.page_item() }}">
                        <button
                            class="{{ css.page_link() }}"
                            data-action="live#action"
                            data-live-action-param="nextPage"
                            {% if page >= paginationInfo.totalPages %}disabled{% endif %}
                        >
                            Next
                        </button>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
{% endif %}
