{% extends kachnitel_admin_base_layout ?: '@KachnitelAdmin/admin/base.html.twig' %}

{% import kachnitel_admin_theme as css %}

{% block title %}Admin Dashboard{% endblock %}

{% block headerTitle %}
  Administration Dashboard
{% endblock %}

{% block content %}
  {# Entities Section #}
  {% if entities|length > 0 %}
  <h2 class="{{ css.h4() }}">Entities</h2>
  <div class="{{ css.row_spaced() }}">
    {% for entity in entities %}
      <div class="{{ css.col_card() }}">
        <div class="{{ css.card_hover() }}">
          <div class="{{ css.card_body() }}">
            <h3 class="{{ css.card_title() }}">
              {{ entity.label }}
            </h3>

            {#
               Links to the 'index' route defined in AdminEntityController
               using the generated slug (e.g. 'work-station')
            #}
            <a href="{{ path('app_admin_entity_index', { entitySlug: entity.slug }) }}"
               class="{{ css.btn_outline_primary() }}">
              Manage {{ entity.label }}s
            </a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  {% endif %}

  {# Data Sources Section (e.g., Audit Logs) #}
  {% if dataSources|default([])|length > 0 %}
  <h2 class="{{ css.h4() }}">Data Sources</h2>
  <div class="{{ css.row() }}">
    {% for ds in dataSources %}
      <div class="{{ css.col_card() }}">
        <div class="{{ css.card_info() }}">
          <div class="{{ css.card_body() }}">
            <h3 class="{{ css.card_title() }}">
              {{ ds.label }}
            </h3>
            <a href="{{ path('app_admin_datasource_index', { dataSourceId: ds.identifier }) }}"
               class="{{ css.btn_outline_info() }}">
              View {{ ds.label }}
            </a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  {% endif %}

  {% if entities|length == 0 and dataSources|default([])|length == 0 %}
  <div class="{{ css.row() }}">
    <div class="{{ css.col_full() }}">
      <div class="{{ css.alert_warning() }}">
        <div>
          No entities or data sources configured.
        </div>
      </div>
    </div>
  </div>
  {% endif %}
{% endblock %}
